import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as l}from"./app-DjwXz1dH.js";const e={};function t(h,s){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h2 id="附录-服务网格常见问题与解决方案" tabindex="-1"><a class="header-anchor" href="#附录-服务网格常见问题与解决方案"><span>附录：服务网格常见问题与解决方案</span></a></h2><p>在服务网格的实践过程中，读者可能会遇到各种问题和挑战。本附录整理了服务网格使用中的常见问题、解决方案以及相关资源，帮助读者更好地理解和应用服务网格技术。</p><h3 id="服务网格常见问题与解决方案" tabindex="-1"><a class="header-anchor" href="#服务网格常见问题与解决方案"><span>服务网格常见问题与解决方案</span></a></h3><h4 id="性能相关问题" tabindex="-1"><a class="header-anchor" href="#性能相关问题"><span>性能相关问题</span></a></h4><p><strong>问题1：服务网格引入后应用延迟明显增加</strong></p><p>解决方案：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 检查Sidecar代理资源配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pod-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 优化连接池参数</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apiVersion:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> networking.istio.io/v1alpha3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kind:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DestinationRule</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  name:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> optimized-connection-pool</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  host:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*.local&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  trafficPolicy:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    connectionPool:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      tcp:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        maxConnections:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        connectTimeout:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10ms</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      http:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        http1MaxPendingRequests:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        maxRequestsPerConnection:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3. 调整资源限制</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apiVersion:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kind:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LimitRange</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  name:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> istio-proxy-limits</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  limits:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      cpu:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 100m</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      memory:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 128Mi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    defaultRequest:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      cpu:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 50m</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      memory:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 64Mi</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Container</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>问题2：大规模部署时控制平面性能下降</strong></p><p>解决方案：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 调整控制平面参数</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">helm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> upgrade</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> istio-system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> istio/istiod</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pilot.resources.requests.cpu=200m</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pilot.resources.requests.memory=256Mi</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pilot.resources.limits.cpu=500m</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pilot.resources.limits.memory=512Mi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 启用Sidecar资源限制</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apiVersion:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kind:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LimitRange</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  name:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> istio-sidecar-limits</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  limits:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      cpu:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 100m</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      memory:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 128Mi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    defaultRequest:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      cpu:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 50m</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      memory:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 64Mi</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Container</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置相关问题" tabindex="-1"><a class="header-anchor" href="#配置相关问题"><span>配置相关问题</span></a></h4><p><strong>问题3：VirtualService配置不生效</strong></p><p>解决方案：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 检查配置语法</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.istio.io/v1alpha3</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">VirtualService</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">troubleshooting-example</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">example.com</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 确保主机名正确</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  gateways</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">example-gateway</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 确保网关存在</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">match</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">uri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/api</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 确保匹配条件正确</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    route</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">destination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">api-service</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 确保目标服务存在</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 验证配置</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">istioctl proxy-config route &lt;pod-name&gt;.&lt;namespace&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>问题4：mTLS配置导致服务间通信失败</strong></p><p>解决方案：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 检查PeerAuthentication配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">security.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PeerAuthentication</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">istio-system</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  mtls</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">STRICT</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 或者PERMISSIVE进行测试</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 检查DestinationRule配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networking.istio.io/v1alpha3</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">DestinationRule</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mtls-destination</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;*.local&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  trafficPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    tls</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ISTIO_MUTUAL</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="安全相关问题" tabindex="-1"><a class="header-anchor" href="#安全相关问题"><span>安全相关问题</span></a></h4><p><strong>问题5：服务间认证失败</strong></p><p>解决方案：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 检查RequestAuthentication配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">security.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">RequestAuthentication</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">jwt-auth</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">istio-system</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  selector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">istio-ingressgateway</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  jwtRules</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">issuer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://accounts.google.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    jwksUri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://www.googleapis.com/oauth2/v3/certs&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 检查AuthorizationPolicy配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">security.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">AuthorizationPolicy</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">require-jwt</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  selector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">httpbin</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  rules</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        requestPrincipals</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="监控相关问题" tabindex="-1"><a class="header-anchor" href="#监控相关问题"><span>监控相关问题</span></a></h4><p><strong>问题6：无法收集监控指标</strong></p><p>解决方案：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1. 检查Sidecar是否正确注入</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pods</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">namespac</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jsonpath=&#39;{.items[*].spec.containers[*].name}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. 验证Prometheus配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apiVersion:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitoring.coreos.com/v1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kind:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ServiceMonitor</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  name:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> istio-mesh-monitor</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  namespace:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitoring</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  selector:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    matchLabels:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      istio:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mixer</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  namespaceSelector:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    matchNames:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> istio-system</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  endpoints:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http-monitoring</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    path:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /metrics</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    interval:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 15s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务网格开源工具与生态系统" tabindex="-1"><a class="header-anchor" href="#服务网格开源工具与生态系统"><span>服务网格开源工具与生态系统</span></a></h3><h4 id="核心服务网格实现" tabindex="-1"><a class="header-anchor" href="#核心服务网格实现"><span>核心服务网格实现</span></a></h4><ol><li><p><strong>Istio</strong></p><ul><li>官方网站：<a href="https://istio.io" target="_blank" rel="noopener noreferrer">https://istio.io</a></li><li>特点：功能丰富、生态完善、Google主导</li><li>适用场景：企业级应用、复杂微服务架构</li></ul></li><li><p><strong>Linkerd</strong></p><ul><li>官方网站：<a href="https://linkerd.io" target="_blank" rel="noopener noreferrer">https://linkerd.io</a></li><li>特点：轻量级、易用性好、CNCF毕业项目</li><li>适用场景：中小型应用、注重性能的场景</li></ul></li><li><p><strong>Consul</strong></p><ul><li>官方网站：<a href="https://www.consul.io" target="_blank" rel="noopener noreferrer">https://www.consul.io</a></li><li>特点：HashiCorp产品、服务发现能力强</li><li>适用场景：混合云环境、多平台部署</li></ul></li><li><p><strong>Open Service Mesh (OSM)</strong></p><ul><li>官方网站：<a href="https://openservicemesh.io" target="_blank" rel="noopener noreferrer">https://openservicemesh.io</a></li><li>特点：微软支持、简单易用</li><li>适用场景：Azure环境、初学者入门</li></ul></li></ol><h4 id="监控与可观测性工具" tabindex="-1"><a class="header-anchor" href="#监控与可观测性工具"><span>监控与可观测性工具</span></a></h4><ol><li><p><strong>Prometheus</strong></p><ul><li>官方网站：<a href="https://prometheus.io" target="_blank" rel="noopener noreferrer">https://prometheus.io</a></li><li>用途：指标收集与存储</li><li>集成：与各种服务网格无缝集成</li></ul></li><li><p><strong>Grafana</strong></p><ul><li>官方网站：<a href="https://grafana.com" target="_blank" rel="noopener noreferrer">https://grafana.com</a></li><li>用途：数据可视化与仪表板</li><li>集成：支持多种数据源</li></ul></li><li><p><strong>Jaeger</strong></p><ul><li>官方网站：<a href="https://www.jaegertracing.io" target="_blank" rel="noopener noreferrer">https://www.jaegertracing.io</a></li><li>用途：分布式追踪</li><li>集成：原生支持OpenTracing</li></ul></li><li><p><strong>Zipkin</strong></p><ul><li>官方网站：<a href="https://zipkin.io" target="_blank" rel="noopener noreferrer">https://zipkin.io</a></li><li>用途：分布式追踪</li><li>集成：支持多种语言客户端</li></ul></li></ol><h4 id="开发与运维工具" tabindex="-1"><a class="header-anchor" href="#开发与运维工具"><span>开发与运维工具</span></a></h4><ol><li><p><strong>Kiali</strong></p><ul><li>官方网站：<a href="https://kiali.io" target="_blank" rel="noopener noreferrer">https://kiali.io</a></li><li>用途：服务网格可视化管理</li><li>特点：提供图形化界面、集成度高</li></ul></li><li><p><strong>istioctl</strong></p><ul><li>用途：Istio命令行工具</li><li>功能：配置管理、故障排查、性能分析</li></ul></li><li><p><strong>Helm</strong></p><ul><li>官方网站：<a href="https://helm.sh" target="_blank" rel="noopener noreferrer">https://helm.sh</a></li><li>用途：Kubernetes包管理</li><li>集成：服务网格部署工具</li></ul></li></ol><h3 id="参考文献与进一步阅读资源" tabindex="-1"><a class="header-anchor" href="#参考文献与进一步阅读资源"><span>参考文献与进一步阅读资源</span></a></h3><h4 id="书籍推荐" tabindex="-1"><a class="header-anchor" href="#书籍推荐"><span>书籍推荐</span></a></h4><ol><li><p><strong>《Istio实战指南》</strong></p><ul><li>作者：马超</li><li>出版社：电子工业出版社</li><li>简介：全面介绍Istio服务网格的实战指南</li></ul></li><li><p><strong>《云原生服务网格Istio》</strong></p><ul><li>作者：宋净超</li><li>出版社：机械工业出版社</li><li>简介：深入解析Istio架构和实现原理</li></ul></li><li><p><strong>《微服务架构设计模式》</strong></p><ul><li>作者：Chris Richardson</li><li>出版社：Manning Publications</li><li>简介：微服务架构设计的经典著作</li></ul></li></ol><h4 id="在线资源" tabindex="-1"><a class="header-anchor" href="#在线资源"><span>在线资源</span></a></h4><ol><li><p><strong>官方文档</strong></p><ul><li>Istio官方文档：<a href="https://istio.io/latest/docs/" target="_blank" rel="noopener noreferrer">https://istio.io/latest/docs/</a></li><li>Linkerd官方文档：<a href="https://linkerd.io/docs/" target="_blank" rel="noopener noreferrer">https://linkerd.io/docs/</a></li><li>Consul官方文档：<a href="https://www.consul.io/docs" target="_blank" rel="noopener noreferrer">https://www.consul.io/docs</a></li></ul></li><li><p><strong>社区资源</strong></p><ul><li>Service Mesh社区：<a href="https://servicemesh.io" target="_blank" rel="noopener noreferrer">https://servicemesh.io</a></li><li>Istio中文社区：<a href="https://istio.io/latest/zh/" target="_blank" rel="noopener noreferrer">https://istio.io/latest/zh/</a></li><li>CNCF服务网格工作组：<a href="https://github.com/cncf/tag-network" target="_blank" rel="noopener noreferrer">https://github.com/cncf/tag-network</a></li></ul></li><li><p><strong>博客与文章</strong></p><ul><li>Istio博客：<a href="https://istio.io/latest/blog/" target="_blank" rel="noopener noreferrer">https://istio.io/latest/blog/</a></li><li>ServiceMesher社区：<a href="https://www.servicemesher.com" target="_blank" rel="noopener noreferrer">https://www.servicemesher.com</a></li><li>InfoQ服务网格专题：<a href="https://www.infoq.com/service-mesh/" target="_blank" rel="noopener noreferrer">https://www.infoq.com/service-mesh/</a></li></ul></li></ol><h4 id="技术规范与标准" tabindex="-1"><a class="header-anchor" href="#技术规范与标准"><span>技术规范与标准</span></a></h4><ol><li><p><strong>Service Mesh Interface (SMI)</strong></p><ul><li>规范地址：<a href="https://smi-spec.io" target="_blank" rel="noopener noreferrer">https://smi-spec.io</a></li><li>简介：微软主导的服务网格标准化项目</li></ul></li><li><p><strong>Open Service Mesh (OSM)</strong></p><ul><li>规范地址：<a href="https://github.com/openservicemesh/osm" target="_blank" rel="noopener noreferrer">https://github.com/openservicemesh/osm</a></li><li>简介：微软开源的服务网格规范</li></ul></li><li><p><strong>Service Mesh API Working Group</strong></p><ul><li>地址：<a href="https://github.com/servicemesh-api" target="_blank" rel="noopener noreferrer">https://github.com/servicemesh-api</a></li><li>简介：服务网格API标准化工作组</li></ul></li></ol><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><p>本附录整理了服务网格使用中的常见问题、解决方案以及相关资源，希望能为读者在实际应用中提供帮助。服务网格技术仍在快速发展中，建议读者持续关注官方文档和社区资源，获取最新的技术信息和最佳实践。</p><p>在遇到问题时，建议按照以下步骤进行排查：</p><ol><li>检查配置语法和参数设置</li><li>验证服务网格组件状态</li><li>查看相关日志信息</li><li>参考官方文档和社区资源</li><li>寻求社区支持和帮助</li></ol><p>通过系统性的学习和实践，相信读者能够熟练掌握服务网格技术，在微服务架构中发挥其最大价值。</p>`,44)])])}const r=i(e,[["render",t]]),d=JSON.parse('{"path":"/posts/service-mesh/8-0-0_Appendix.html","title":"附录：服务网格常见问题与解决方案","lang":"zh-CN","frontmatter":{"title":"附录：服务网格常见问题与解决方案","date":"2025-08-31T00:00:00.000Z","categories":["Service Mesh"],"tags":["service-mesh"],"published":true,"description":"附录：服务网格常见问题与解决方案 在服务网格的实践过程中，读者可能会遇到各种问题和挑战。本附录整理了服务网格使用中的常见问题、解决方案以及相关资源，帮助读者更好地理解和应用服务网格技术。 服务网格常见问题与解决方案 性能相关问题 问题1：服务网格引入后应用延迟明显增加 解决方案： 问题2：大规模部署时控制平面性能下降 解决方案： 配置相关问题 问题3：...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"附录：服务网格常见问题与解决方案\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-08-31T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-01T13:27:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/blog-micro-service/posts/service-mesh/8-0-0_Appendix.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"附录：服务网格常见问题与解决方案"}],["meta",{"property":"og:description","content":"附录：服务网格常见问题与解决方案 在服务网格的实践过程中，读者可能会遇到各种问题和挑战。本附录整理了服务网格使用中的常见问题、解决方案以及相关资源，帮助读者更好地理解和应用服务网格技术。 服务网格常见问题与解决方案 性能相关问题 问题1：服务网格引入后应用延迟明显增加 解决方案： 问题2：大规模部署时控制平面性能下降 解决方案： 配置相关问题 问题3：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-01T13:27:06.000Z"}],["meta",{"property":"article:tag","content":"service-mesh"}],["meta",{"property":"article:published_time","content":"2025-08-31T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-01T13:27:06.000Z"}]]},"git":{"createdTime":1756698707000,"updatedTime":1756733226000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1},{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":1,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":4.96,"words":1487},"filePathRelative":"posts/service-mesh/8-0-0_Appendix.md","excerpt":"<h2>附录：服务网格常见问题与解决方案</h2>\\n<p>在服务网格的实践过程中，读者可能会遇到各种问题和挑战。本附录整理了服务网格使用中的常见问题、解决方案以及相关资源，帮助读者更好地理解和应用服务网格技术。</p>\\n<h3>服务网格常见问题与解决方案</h3>\\n<h4>性能相关问题</h4>\\n<p><strong>问题1：服务网格引入后应用延迟明显增加</strong></p>\\n<p>解决方案：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 1. 检查Sidecar代理资源配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">kubectl</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> describe</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> pod</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &lt;</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">pod-nam</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">e&gt; </span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">-n</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &lt;</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">namespac</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">e&gt;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 2. 优化连接池参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">apiVersion:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> networking.istio.io/v1alpha3</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">kind:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> DestinationRule</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">metadata:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  name:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> optimized-connection-pool</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">spec:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  host:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> \\"*.local\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  trafficPolicy:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">    connectionPool:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">      tcp:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">        maxConnections:</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 1000</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">        connectTimeout:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 10ms</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">      http:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">        http1MaxPendingRequests:</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 10000</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">        maxRequestsPerConnection:</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> 100</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"># 3. 调整资源限制</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">apiVersion:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> v1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">kind:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> LimitRange</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">metadata:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  name:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> istio-proxy-limits</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">spec:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  limits:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  -</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> default:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">      cpu:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 100m</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">      memory:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 128Mi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">    defaultRequest:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">      cpu:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 50m</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">      memory:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 64Mi</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">    type</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">:</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Container</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{r as comp,d as data};
