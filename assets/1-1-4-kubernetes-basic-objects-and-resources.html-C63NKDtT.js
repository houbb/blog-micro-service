import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-BS2-Vf28.js";const l={};function t(h,s){return n(),a("div",null,[...s[0]||(s[0]=[e(`<p>Kubernetes通过一系列对象和资源来表示集群的状态。理解这些基本对象和资源是有效使用Kubernetes的关键。本章将详细介绍Kubernetes中最核心的对象和资源，包括它们的作用、使用方式以及管理方法。</p><h2 id="pod、replicaset、deployment、statefulset" tabindex="-1"><a class="header-anchor" href="#pod、replicaset、deployment、statefulset"><span>Pod、ReplicaSet、Deployment、StatefulSet</span></a></h2><h3 id="pod" tabindex="-1"><a class="header-anchor" href="#pod"><span>Pod</span></a></h3><p>Pod是Kubernetes中最小的可部署单元，代表集群中运行的进程。一个Pod可以包含一个或多个紧密相关的容器，这些容器共享存储、网络和运行规范。</p><h4 id="pod的特性" tabindex="-1"><a class="header-anchor" href="#pod的特性"><span>Pod的特性</span></a></h4><ul><li><strong>共享网络</strong>：Pod内的所有容器共享同一个IP地址和端口空间</li><li><strong>共享存储</strong>：Pod可以定义存储卷，Pod内的所有容器都可以访问这些存储卷</li><li><strong>生命周期</strong>：Pod是短暂的，不会自愈，需要控制器来管理</li><li><strong>原子性</strong>：Pod内的所有容器被当作一个整体进行调度和管理</li></ul><h4 id="pod的使用场景" tabindex="-1"><a class="header-anchor" href="#pod的使用场景"><span>Pod的使用场景</span></a></h4><ul><li>单容器应用：最常见的使用方式</li><li>多容器协作：如应用容器和日志收集容器</li><li>Sidecar模式：辅助容器为主容器提供额外功能</li></ul><h3 id="replicaset" tabindex="-1"><a class="header-anchor" href="#replicaset"><span>ReplicaSet</span></a></h3><p>ReplicaSet是确保任何给定时间都有指定数量的Pod副本在运行的控制器。它是下一代Replication Controller，支持基于集合的选择器。</p><h4 id="replicaset的功能" tabindex="-1"><a class="header-anchor" href="#replicaset的功能"><span>ReplicaSet的功能</span></a></h4><ul><li><strong>副本管理</strong>：确保指定数量的Pod副本始终运行</li><li><strong>标签选择</strong>：通过标签选择器识别管理的Pod</li><li><strong>自动恢复</strong>：当Pod失败时自动创建新的Pod</li></ul><h4 id="replicaset的局限性" tabindex="-1"><a class="header-anchor" href="#replicaset的局限性"><span>ReplicaSet的局限性</span></a></h4><p>虽然ReplicaSet功能强大，但它通常不直接使用，而是通过Deployment来管理。</p><h3 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment"><span>Deployment</span></a></h3><p>Deployment为Pod和ReplicaSet提供声明式更新。它是管理应用部署的推荐方式。</p><h4 id="deployment的优势" tabindex="-1"><a class="header-anchor" href="#deployment的优势"><span>Deployment的优势</span></a></h4><ul><li><strong>声明式更新</strong>：通过声明期望状态来管理应用</li><li><strong>滚动更新</strong>：支持无停机的应用更新</li><li><strong>回滚功能</strong>：可以轻松回滚到之前的版本</li><li><strong>扩缩容</strong>：可以轻松调整应用副本数量</li></ul><h4 id="deployment的使用示例" tabindex="-1"><a class="header-anchor" href="#deployment的使用示例"><span>Deployment的使用示例</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx-deployment</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  replicas</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  selector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      containers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx:1.14.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">containerPort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="statefulset" tabindex="-1"><a class="header-anchor" href="#statefulset"><span>StatefulSet</span></a></h3><p>StatefulSet是为有状态应用设计的控制器，为Pod提供唯一的标识和持久存储。</p><h4 id="statefulset的特点" tabindex="-1"><a class="header-anchor" href="#statefulset的特点"><span>StatefulSet的特点</span></a></h4><ul><li><strong>稳定的网络标识</strong>：每个Pod都有稳定的网络标识</li><li><strong>持久存储</strong>：支持持久卷的按序创建和删除</li><li><strong>有序部署和删除</strong>：Pod按序创建和删除</li><li><strong>有序滚动更新</strong>：支持有序的滚动更新</li></ul><h4 id="statefulset的使用场景" tabindex="-1"><a class="header-anchor" href="#statefulset的使用场景"><span>StatefulSet的使用场景</span></a></h4><ul><li>数据库集群（如MySQL、PostgreSQL）</li><li>分布式存储系统（如etcd、Cassandra）</li><li>消息队列系统（如Kafka、RabbitMQ）</li></ul><h2 id="service、configmap、secret、ingress" tabindex="-1"><a class="header-anchor" href="#service、configmap、secret、ingress"><span>Service、ConfigMap、Secret、Ingress</span></a></h2><h3 id="service" tabindex="-1"><a class="header-anchor" href="#service"><span>Service</span></a></h3><p>Service是为一组Pod提供稳定的网络访问入口的抽象。</p><h4 id="service的类型" tabindex="-1"><a class="header-anchor" href="#service的类型"><span>Service的类型</span></a></h4><ul><li><strong>ClusterIP</strong>：默认类型，在集群内部暴露服务</li><li><strong>NodePort</strong>：在每个节点上开放端口，从外部访问服务</li><li><strong>LoadBalancer</strong>：通过云提供商的负载均衡器暴露服务</li><li><strong>ExternalName</strong>：将服务映射到外部DNS名称</li></ul><h4 id="service的使用示例" tabindex="-1"><a class="header-anchor" href="#service的使用示例"><span>Service的使用示例</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Service</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">my-service</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  selector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MyApp</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">protocol</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">TCP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">80</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      targetPort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">9376</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="configmap" tabindex="-1"><a class="header-anchor" href="#configmap"><span>ConfigMap</span></a></h3><p>ConfigMap用于存储非机密性的配置数据，以键值对的形式存储。</p><h4 id="configmap的使用方式" tabindex="-1"><a class="header-anchor" href="#configmap的使用方式"><span>ConfigMap的使用方式</span></a></h4><ul><li><strong>环境变量</strong>：将ConfigMap中的数据作为环境变量注入容器</li><li><strong>命令行参数</strong>：将ConfigMap中的数据作为命令行参数传递给容器</li><li><strong>存储卷</strong>：将ConfigMap挂载为存储卷供容器使用</li></ul><h4 id="configmap示例" tabindex="-1"><a class="header-anchor" href="#configmap示例"><span>ConfigMap示例</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ConfigMap</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">game-demo</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  player_initial_lives</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ui_properties_file_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;user-interface.properties&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="secret" tabindex="-1"><a class="header-anchor" href="#secret"><span>Secret</span></a></h3><p>Secret用于存储敏感信息，如密码、OAuth令牌和SSH密钥。</p><h4 id="secret的类型" tabindex="-1"><a class="header-anchor" href="#secret的类型"><span>Secret的类型</span></a></h4><ul><li><strong>Opaque</strong>：通用的Secret类型</li><li><strong><a href="http://kubernetes.io/service-account-token" target="_blank" rel="noopener noreferrer">kubernetes.io/service-account-token</a></strong>：服务账户令牌</li><li><strong><a href="http://kubernetes.io/dockercfg" target="_blank" rel="noopener noreferrer">kubernetes.io/dockercfg</a></strong>：Docker配置文件</li><li><strong><a href="http://kubernetes.io/tls" target="_blank" rel="noopener noreferrer">kubernetes.io/tls</a></strong>：TLS证书和密钥</li></ul><h4 id="secret的安全性" tabindex="-1"><a class="header-anchor" href="#secret的安全性"><span>Secret的安全性</span></a></h4><ul><li>Base64编码存储（不是加密）</li><li>支持加密存储（需要配置）</li><li>访问控制通过RBAC实现</li></ul><h3 id="ingress" tabindex="-1"><a class="header-anchor" href="#ingress"><span>Ingress</span></a></h3><p>Ingress管理对集群中服务的外部访问，通常用于HTTP路由。</p><h4 id="ingress的功能" tabindex="-1"><a class="header-anchor" href="#ingress的功能"><span>Ingress的功能</span></a></h4><ul><li><strong>HTTP路由</strong>：基于主机名和路径的路由</li><li><strong>TLS终止</strong>：支持SSL/TLS证书</li><li><strong>负载均衡</strong>：集成负载均衡功能</li></ul><h4 id="ingress控制器" tabindex="-1"><a class="header-anchor" href="#ingress控制器"><span>Ingress控制器</span></a></h4><p>需要部署Ingress控制器才能使Ingress资源生效，常用的控制器包括：</p><ul><li>Nginx Ingress Controller</li><li>Traefik</li><li>HAProxy Ingress</li></ul><h2 id="persistentvolume、persistentvolumeclaim" tabindex="-1"><a class="header-anchor" href="#persistentvolume、persistentvolumeclaim"><span>PersistentVolume、PersistentVolumeClaim</span></a></h2><h3 id="persistentvolume-pv" tabindex="-1"><a class="header-anchor" href="#persistentvolume-pv"><span>PersistentVolume (PV)</span></a></h3><p>PersistentVolume是集群中的一块存储资源，由管理员配置或使用存储类动态配置。</p><h4 id="pv的访问模式" tabindex="-1"><a class="header-anchor" href="#pv的访问模式"><span>PV的访问模式</span></a></h4><ul><li><strong>ReadWriteOnce (RWO)</strong>：单个节点读写</li><li><strong>ReadOnlyMany (ROX)</strong>：多个节点只读</li><li><strong>ReadWriteMany (RWX)</strong>：多个节点读写</li></ul><h4 id="pv的回收策略" tabindex="-1"><a class="header-anchor" href="#pv的回收策略"><span>PV的回收策略</span></a></h4><ul><li><strong>Retain</strong>：手动回收</li><li><strong>Recycle</strong>：基本擦除后回收（已弃用）</li><li><strong>Delete</strong>：删除关联的存储资产</li></ul><h3 id="persistentvolumeclaim-pvc" tabindex="-1"><a class="header-anchor" href="#persistentvolumeclaim-pvc"><span>PersistentVolumeClaim (PVC)</span></a></h3><p>PersistentVolumeClaim是用户对存储的请求，类似于Pod对计算资源的请求。</p><h4 id="pvc的工作流程" tabindex="-1"><a class="header-anchor" href="#pvc的工作流程"><span>PVC的工作流程</span></a></h4><ol><li>用户创建PVC</li><li>Kubernetes查找匹配的PV</li><li>将PV绑定到PVC</li><li>Pod使用PVC获取存储</li></ol><h2 id="namespace、resourcequota、limitrange" tabindex="-1"><a class="header-anchor" href="#namespace、resourcequota、limitrange"><span>Namespace、ResourceQuota、LimitRange</span></a></h2><h3 id="namespace" tabindex="-1"><a class="header-anchor" href="#namespace"><span>Namespace</span></a></h3><p>Namespace是用于在单个集群中创建多个虚拟集群的机制。</p><h4 id="namespace的用途" tabindex="-1"><a class="header-anchor" href="#namespace的用途"><span>Namespace的用途</span></a></h4><ul><li><strong>资源隔离</strong>：不同团队或项目的资源隔离</li><li><strong>访问控制</strong>：基于Namespace的权限控制</li><li><strong>资源管理</strong>：按Namespace分配资源</li></ul><h4 id="namespace的操作" tabindex="-1"><a class="header-anchor" href="#namespace的操作"><span>Namespace的操作</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 创建Namespace</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> namespace</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-namespace</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看Namespace</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> namespaces</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 删除Namespace</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> namespace</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-namespace</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="resourcequota" tabindex="-1"><a class="header-anchor" href="#resourcequota"><span>ResourceQuota</span></a></h3><p>ResourceQuota用于限制Namespace中资源的使用总量。</p><h4 id="resourcequota的限制类型" tabindex="-1"><a class="header-anchor" href="#resourcequota的限制类型"><span>ResourceQuota的限制类型</span></a></h4><ul><li><strong>计算资源</strong>：CPU、内存的请求和限制</li><li><strong>存储资源</strong>：存储请求和持久卷声明数量</li><li><strong>对象数量</strong>：Pod、Service等对象的数量</li></ul><h4 id="resourcequota示例" tabindex="-1"><a class="header-anchor" href="#resourcequota示例"><span>ResourceQuota示例</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ResourceQuota</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">demo</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  hard</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    requests.cpu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    requests.memory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1Gi</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    limits.cpu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    limits.memory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">2Gi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="limitrange" tabindex="-1"><a class="header-anchor" href="#limitrange"><span>LimitRange</span></a></h3><p>LimitRange用于限制Namespace中单个对象可以使用的资源量。</p><h4 id="limitrange的限制类型" tabindex="-1"><a class="header-anchor" href="#limitrange的限制类型"><span>LimitRange的限制类型</span></a></h4><ul><li><strong>Container</strong>：限制单个容器的资源使用</li><li><strong>Pod</strong>：限制单个Pod的资源使用</li><li><strong>PersistentVolumeClaim</strong>：限制存储请求</li></ul><h2 id="查看与管理-kubernetes-资源-kubectl-命令" tabindex="-1"><a class="header-anchor" href="#查看与管理-kubernetes-资源-kubectl-命令"><span>查看与管理 Kubernetes 资源（kubectl 命令）</span></a></h2><p>kubectl是Kubernetes的命令行工具，用于与集群交互。</p><h3 id="基本命令" tabindex="-1"><a class="header-anchor" href="#基本命令"><span>基本命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看资源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pods</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> services</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployments</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看详细信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pod-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">service-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 创建资源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">file.yam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">l&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">file.yam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">l&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 删除资源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pod-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">file.yam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">l&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="高级命令" tabindex="-1"><a class="header-anchor" href="#高级命令"><span>高级命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 编辑资源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> edit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">deployment-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看日志</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pod-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 进入容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pod-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 端口转发</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port-forward</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pod-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">8080:80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过本章的学习，读者应该能够理解Kubernetes的基本对象和资源，掌握它们的使用方法，并能够通过kubectl命令有效地管理这些资源。这些核心概念是后续章节深入学习Kubernetes的基础。</p>`,87)])])}const k=i(l,[["render",t]]),d=JSON.parse('{"path":"/posts/container-k8s/1-1-4-kubernetes-basic-objects-and-resources.html","title":"Kubernetes基本对象与资源：构建云原生应用的核心构件","lang":"zh-CN","frontmatter":{"title":"Kubernetes基本对象与资源：构建云原生应用的核心构件","date":"2025-08-31T00:00:00.000Z","categories":["Kubernetes"],"tags":["container-k8s"],"published":true,"description":"Kubernetes通过一系列对象和资源来表示集群的状态。理解这些基本对象和资源是有效使用Kubernetes的关键。本章将详细介绍Kubernetes中最核心的对象和资源，包括它们的作用、使用方式以及管理方法。 Pod、ReplicaSet、Deployment、StatefulSet Pod Pod是Kubernetes中最小的可部署单元，代表集群...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Kubernetes基本对象与资源：构建云原生应用的核心构件\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-08-31T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-01T13:27:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/blog-micro-service/posts/container-k8s/1-1-4-kubernetes-basic-objects-and-resources.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"Kubernetes基本对象与资源：构建云原生应用的核心构件"}],["meta",{"property":"og:description","content":"Kubernetes通过一系列对象和资源来表示集群的状态。理解这些基本对象和资源是有效使用Kubernetes的关键。本章将详细介绍Kubernetes中最核心的对象和资源，包括它们的作用、使用方式以及管理方法。 Pod、ReplicaSet、Deployment、StatefulSet Pod Pod是Kubernetes中最小的可部署单元，代表集群..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-01T13:27:06.000Z"}],["meta",{"property":"article:tag","content":"container-k8s"}],["meta",{"property":"article:published_time","content":"2025-08-31T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-01T13:27:06.000Z"}]]},"git":{"createdTime":1756698707000,"updatedTime":1756733226000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":1},{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":1,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":5.67,"words":1701},"filePathRelative":"posts/container-k8s/1-1-4-kubernetes-basic-objects-and-resources.md","excerpt":"<p>Kubernetes通过一系列对象和资源来表示集群的状态。理解这些基本对象和资源是有效使用Kubernetes的关键。本章将详细介绍Kubernetes中最核心的对象和资源，包括它们的作用、使用方式以及管理方法。</p>\\n<h2>Pod、ReplicaSet、Deployment、StatefulSet</h2>\\n<h3>Pod</h3>\\n<p>Pod是Kubernetes中最小的可部署单元，代表集群中运行的进程。一个Pod可以包含一个或多个紧密相关的容器，这些容器共享存储、网络和运行规范。</p>\\n<h4>Pod的特性</h4>\\n<ul>\\n<li><strong>共享网络</strong>：Pod内的所有容器共享同一个IP地址和端口空间</li>\\n<li><strong>共享存储</strong>：Pod可以定义存储卷，Pod内的所有容器都可以访问这些存储卷</li>\\n<li><strong>生命周期</strong>：Pod是短暂的，不会自愈，需要控制器来管理</li>\\n<li><strong>原子性</strong>：Pod内的所有容器被当作一个整体进行调度和管理</li>\\n</ul>","autoDesc":true}');export{k as comp,d as data};
